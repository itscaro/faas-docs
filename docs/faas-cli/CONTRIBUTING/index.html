<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Contributing - OpenFaaS</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../faas/gateway/assets/style/bootstrap.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Contributing";
    var mkdocs_page_input_path = "faas-cli/CONTRIBUTING.md";
    var mkdocs_page_url = "/faas-cli/CONTRIBUTING/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> OpenFaaS</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Gateway</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../faas/README/">Gateway</a>
                </li>
                <li class="">
                    
    <a class="" href="../../faas/DEV/">Dev</a>
                </li>
                <li class="">
                    
    <a class="" href="../../faas/ROADMAP/">Roadmap</a>
                </li>
                <li class="">
                    
    <a class="" href="../../faas/CONTRIBUTING/">Contributing</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Cli</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../README/">Cli</a>
                </li>
                <li class="">
                    
    <a class="" href="../MANUAL_CLI/">Manual</a>
                </li>
                <li class="">
                    
    <a class="" href="../Notes/">Notes</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Contributing</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#contributing">Contributing</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#license">License</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#guidelines-apply-from-main-openfaas-repo">Guidelines apply from main OpenFaaS repo</a></li>
    

    <li class="toctree-l3"><a href="#unit-testing-with-golang">Unit testing with Golang</a></li>
    

    <li class="toctree-l3"><a href="#hacking-on-the-faas-cli">Hacking on the faas-cli</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#installation-pre-requirements">Installation / pre-requirements</a></li>
        
            <li><a class="toctree-l4" href="#update-the-utility-script">Update the utility-script</a></li>
        
            <li><a class="toctree-l4" href="#developer-dco-re-iteration-from-referenced-contributing-guide">Developer DCO (re-iteration from referenced CONTRIBUTING guide)</a></li>
        
            <li><a class="toctree-l4" href="#misc">Misc</a></li>
        
        </ul>
    

    </ul>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">OpenFaaS</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Cli &raquo;</li>
        
      
    
    <li>Contributing</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="contributing">Contributing</h2>
<h3 id="license">License</h3>
<p>This project is licensed under the MIT License.</p>
<h2 id="guidelines-apply-from-main-openfaas-repo">Guidelines apply from main OpenFaaS repo</h2>
<p>See guide for <a href="https://github.com/openfaas/faas/blob/master/CONTRIBUTING.md">FaaS</a> here.</p>
<h2 id="unit-testing-with-golang">Unit testing with Golang</h2>
<p>Please follow style guide on <a href="https://blog.alexellis.io/golang-writing-unit-tests/">this blog post</a> from <a href="https://www.amazon.co.uk/Programming-Language-Addison-Wesley-Professional-Computing/dp/0134190440">The Go Programming Language</a></p>
<h1 id="hacking-on-the-faas-cli">Hacking on the faas-cli</h1>
<h2 id="installation-pre-requirements">Installation / pre-requirements</h2>
<ul>
<li>Docker</li>
</ul>
<p>Install Docker because it is used to build Docker images if you create new functions.</p>
<ul>
<li>OpenFaaS - deployed and live</li>
</ul>
<p>This CLI can build and deploy templated functions, so it's best if you have FaaS started up on your laptop. Head over to http://github.com/openfaas/faas/ and get up and running with a sample stack in 60 seconds.</p>
<ul>
<li>Golang</li>
</ul>
<blockquote>
<p>Here's how to install Go in 60 seconds.</p>
</blockquote>
<ul>
<li>Grab Go 1.7.x or 1.8.3 from https://golang.org/dl/</li>
</ul>
<p>Then after installing run this command or place it in your <code>$HOME/.bash_profile</code></p>
<pre><code class="bash">export GOPATH=$HOME/go
export PATH=$PATH:$GOPATH/bin
</code></pre>

<ul>
<li>Now clone / build <code>faas-cli</code>:</li>
</ul>
<pre><code class="bash">Migrate all imports/references to OpenFaaS org
$ mkdir -p $GOPATH/src/github.com/openfaas/
$ cd $GOPATH/src/github.com/openfaas/
$ git clone https://github.com/openfaas/faas-cli
$ cd faas-cli
$ go build
</code></pre>

<ul>
<li>Build multi-arch binaries</li>
</ul>
<p>To build the release binaries type in:</p>
<pre><code>./build_redist.sh
</code></pre>

<p>This creates the faas-cli for Mac, Windows, Linux x64, Linux ARMHF and Linux ARM64.</p>
<ul>
<li>Get the vendoring tool called <code>vndr</code></li>
</ul>
<pre><code>$ go install github.com/LK4D4/vndr
</code></pre>

<p>Use the tool if you add new dependencies or want to update the existing ones.</p>
<blockquote>
<p>See also: <a href="https://github.com/LK4D4/vndr">vndr docs</a></p>
</blockquote>
<h3 id="how-to-update-the-brew-formula">How to update the <code>brew</code> formula</h3>
<p>The <code>brew</code> formula for the faas-cli is part of the official <a href="https://github.com/Homebrew/homebrew-core/blob/master/Formula/faas-cli.rb">homebrew-core</a> repo on Github. It needs to be updated for each subsequent release.</p>
<h4 id="simple-version-bumps">Simple version bumps</h4>
<p>If the only change required is a version bump, ie no new tests, or changes to existing tested functionality or build steps, the <code>brew bump-formula-pr</code> command can be used to do everything (i.e. forking, committing, pushing) required to bump the version.</p>
<p>For example (supplying both the new version tag and its associated Git sha-256).</p>
<pre><code>brew bump-formula-pr --strict faas-cli --tag=&lt;version&gt; --revision=&lt;sha-256&gt;
</code></pre>

<h4 id="changes-requiring-newupdate-testsbuild-steps">Changes requiring new/update tests/build steps</h4>
<p>If a new release alters behaviour tested in the Brew Formula, adds new testable behaviors or alters the build steps then you will need to manually raise a PR with an updated Formula, the guidelines for updating brew describe the process in more detail:</p>
<p>https://github.com/Homebrew/homebrew-core/blob/master/CONTRIBUTING.md</p>
<p>After <code>brew edit</code> run the build and test the results:</p>
<pre><code>$ brew uninstall --force faas-cli ; \
  brew install --build-from-source faas-cli ; \
  brew test faas-cli ; \
  brew audit --strict faas-cli
</code></pre>

<h2 id="update-the-utility-script">Update the utility-script</h2>
<p>Please raise a PR for the get.sh file held in this repository. It's used when people install via <code>curl</code> and <code>cli.openfaas.com</code>. The updated file then has to be redeployed to the hosting server.</p>
<h2 id="developer-dco-re-iteration-from-referenced-contributing-guide">Developer DCO (re-iteration from referenced CONTRIBUTING guide)</h2>
<h3 id="sign-your-work">Sign your work</h3>
<blockquote>
<p>Note: all of the commits in your PR/Patch must be signed-off.</p>
</blockquote>
<p>The sign-off is a simple line at the end of the explanation for a patch. Your
signature certifies that you wrote the patch or otherwise have the right to pass
it on as an open-source patch. The rules are pretty simple: if you can certify
the below (from <a href="http://developercertificate.org/">developercertificate.org</a>):</p>
<pre><code>Developer Certificate of Origin
Version 1.1

Copyright (C) 2004, 2006 The Linux Foundation and its contributors.
1 Letterman Drive
Suite D4700
San Francisco, CA, 94129

Everyone is permitted to copy and distribute verbatim copies of this
license document, but changing it is not allowed.

Developer's Certificate of Origin 1.1

By making a contribution to this project, I certify that:

(a) The contribution was created in whole or in part by me and I
    have the right to submit it under the open source license
    indicated in the file; or

(b) The contribution is based upon previous work that, to the best
    of my knowledge, is covered under an appropriate open source
    license and I have the right under that license to submit that
    work with modifications, whether created in whole or in part
    by me, under the same open source license (unless I am
    permitted to submit under a different license), as indicated
    in the file; or

(c) The contribution was provided directly to me by some other
    person who certified (a), (b) or (c) and I have not modified
    it.

(d) I understand and agree that this project and the contribution
    are public and that a record of the contribution (including all
    personal information I submit with it, including my sign-off) is
    maintained indefinitely and may be redistributed consistent with
    this project or the open source license(s) involved.
</code></pre>

<p>Then you just add a line to every git commit message:</p>
<pre><code>Signed-off-by: Joe Smith &lt;joe.smith@email.com&gt;
</code></pre>
<p>Use your real name (sorry, no pseudonyms or anonymous contributions.)</p>
<p>If you set your <code>user.name</code> and <code>user.email</code> git configs, you can sign your
commit automatically with <code>git commit -s</code>.</p>
<ul>
<li>Please sign your commits with <code>git commit -s</code> so that commits are traceable.</li>
</ul>
<h2 id="misc">Misc</h2>
<p><strong>Bash Auto-completion [experimental]</strong></p>
<p>An experimental initial Bash auto-completion script for <code>faas-cli</code> is available at <code>contrib/bash/faas-cli</code>.</p>
<p>Please raise issues with feedback and suggestions on improvements to the auto-completion support.</p>
<p>This may be enabled it as follows.</p>
<p><em>Enabling Bash auto-completion on OSX</em></p>
<p>Brew install the <code>bash_completions</code> package.</p>
<pre><code>$ brew install bash-completion
</code></pre>

<p>Add the following line to your <code>~/.bash_profile</code> if not already present.</p>
<pre><code>[ -f /usr/local/etc/bash_completion ] &amp;&amp; . /usr/local/etc/bash_completion
</code></pre>

<p>Copy the provided <code>faas-cli</code> bash completion script from this repo.</p>
<pre><code>cp contrib/bash/faas-cli /usr/local/etc/bash_completion.d/
</code></pre>

<p><em>Enabling Bash auto-completion on Linux</em></p>
<p>Refer to your distributions instructions on installing and enabling <code>bash-completion</code>, then copy the <code>faas-cli</code> completion script from <code>contrib/bash/</code> into the appropriate completion directory.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../Notes/" class="btn btn-neutral" title="Notes"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../Notes/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
    </span>
</div>
    <script src="../../js/theme.js"></script>
      <script src="../../faas/gateway/assets/script/bootstrap.js"></script>
      <script src="../../faas/sample-functions/BaseFunctions/node/handler.js"></script>
      <script src="../../faas/sample-functions/CaptainsIntent/handler.js"></script>
      <script src="../../faas/sample-functions/CaptainsIntent/parser.js"></script>
      <script src="../../faas/sample-functions/ChangeColorIntent/handler.js"></script>
      <script src="../../faas/sample-functions/ChangeColorIntent/sendColor.js"></script>
      <script src="../../faas/sample-functions/HostnameIntent/handler.js"></script>
      <script src="../../faas/sample-functions/NodeInfo/handler.js"></script>
      <script src="../../faas/sample-functions/NodeInfo/main.js"></script>
      <script src="../../faas/sample-functions/Phantomjs/cnn.js"></script>
      <script src="../../faas/sample-functions/Phantomjs/feedly_subscribers.js"></script>
      <script src="../../faas-cli/sample/get_captains/handler.js"></script>
      <script src="../../faas-cli/sample/get_captains/parser.js"></script>
      <script src="../../faas-cli/sample/nodejs-echo/handler.js"></script>
      <script src="../../faas-cli/template/node/index.js"></script>
      <script src="../../faas-cli/template/node/function/handler.js"></script>
      <script src="../../faas-cli/template/node-arm64/index.js"></script>
      <script src="../../faas-cli/template/node-arm64/function/handler.js"></script>

</body>
</html>
